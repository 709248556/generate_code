<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zfull.service.webbusiness.dao.">

    <sql id="Base_Column_List">
                g.Fid AS id,
        g.Fparent_id AS parentId,
        g.Fname AS name,
        g.Fprice AS price,
        g.Flast_time AS lastTime
    </sql>

    <insert id="insert" parameterType="GarbageDTO">
        INSERT INTO bz_garbage
        ( 
        Fid,
        Fparent_id,
        Fname,
        Fprice,
        Flast_time
        )
        VALUES
        (
        #{id},
        #{parentId},
        #{name},
        #{price},
        #{lastTime}
        )
    </insert>


    <delete id="deleteById" parameterType="java.lang.Long">
        DELETE FROM bz_garbage
        where Fid =  #{id} and Fid =  #{id}
    </delete>

    <update id="update" parameterType="GarbageDTO">
        update bz_garbage
        <set>
            <if test="id != null">
                Fid = #{id},
            </if>
            <if test="parentId != null">
                Fparent_id = #{parentId},
            </if>
            <if test=" name != null and name !=''">
                Fname =#{name},
            </if>
            <if test="price != null">
                Fprice = #{price},
            </if>
            <if test="lastTime != null">
                Flast_time = #{lastTime},
            </if>
        </set>
        where Fid =  #{id} and Fid =  #{id}
    </update>

    <select id="queryList" resultType="GarbageDTO" parameterType="GarbageQuery">
        select <include refid="Base_Column_List"/> from bz_garbage g
        <trim prefix="WHERE" prefixOverrides="AND">
            <if test="id != null">
                AND g.Fid = #{id}
            </if>
            <if test="parentId != null">
                AND g.Fparent_id = #{parentId}
            </if>
            <if test="name != null and name !=''">
                AND g.Fname =#{name}
            </if>
            <if test="price != null">
                AND g.Fprice = #{price}
            </if>
            <if test="lastTime != null">
                AND g.Flast_time = #{lastTime}
            </if>
        </trim>
    </select>

    <select id="querySingle" resultType="GarbageDTO" parameterType="GarbageQuery">
        select <include refid="Base_Column_List"/> from bz_garbage g
        where g.Fid =  #{id} and g.Fid =  #{id}
    </select>
</mapper>